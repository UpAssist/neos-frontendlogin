{namespace user=UpAssist\Neos\FrontendLogin\ViewHelpers}
<f:security.ifAccess privilegeTarget="Neos.Neos:Backend.GeneralAccess">
	<f:then>
		<p>The Frontend User Profile is disabled in backend mode.</p>
	</f:then>
	<f:else>
		<f:flashMessages class="flashmessages"/>
		<f:form action="update" object="{user}" objectName="user">
			<fieldset>
				<input type="text" readonly="readonly" value="{user.accounts.0.accountIdentifier}" />
				<f:render partial="User/NameFormFields" arguments="{_all}"/>
			</fieldset>
			<fieldset>
				<f:render partial="User/ElectronicAddress/FormFields" arguments="{_all}"/>
			</fieldset>
			<fieldset>
				<label>Change password</label>
				<f:form.textfield name="password" id="password"/>
			</fieldset>
			<f:if condition="{roleIdentifiers}">
				<fieldset>
						<f:for each="{roleIdentifiers}" as="role">
							<label>
								<input name="{namespace}[roleIdentifiers]" type="radio" value="{role.key}" {f:if(condition:'{user:hasRole(user:\'{user}\',role:\'{role.key}\')}', then: 'checked')}/> {role.label}
							</label>
						</f:for>
				</fieldset>
			</f:if>
			<f:form.button type="submit">Update</f:form.button>
		</f:form>
	</f:else>
</f:security.ifAccess>

